(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c("undefined"!=typeof jQuery?jQuery:window.Zepto)})(function(c){function v(a){var i=a.data;a.isDefaultPrevented()||(a.preventDefault(),c(a.target).ajaxSubmit(i))}function r(a){var i=a.target,f=c(i);if(!f.is("[type=submit],[type=image]")){i=f.closest("[type=submit]");if(0===i.length)return;i=i[0]}var b=this;b.clk=i;"image"==i.type&&(void 0!==a.offsetX?(b.clk_x=a.offsetX,b.clk_y=a.offsetY):"function"==typeof c.fn.offset?(f=f.offset(),
b.clk_x=a.pageX-f.left,b.clk_y=a.pageY-f.top):(b.clk_x=a.pageX-i.offsetLeft,b.clk_y=a.pageY-i.offsetTop));setTimeout(function(){b.clk=b.clk_x=b.clk_y=null},100)}function n(){if(c.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var z,F;z=void 0!==c("<input type='file'/>").get(0).files;F=void 0!==window.FormData;var B=!!c.fn.prop;c.fn.attr2=function(){if(!B)return this.attr.apply(this,
arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"===typeof a?a:this.attr.apply(this,arguments)};c.fn.ajaxSubmit=function(a){function i(b){function i(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){n("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(d){n("cannot get iframe.contentDocument: "+d),b=a.document}return b}function h(){function a(){try{var b=i(s).readyState;n("state = "+
b);b&&"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(c){n("Server abort: ",c," (",c.name,")"),l(D),r&&clearTimeout(r),r=void 0}}var b=e.attr2("target"),g=e.attr2("action"),j=e.attr("enctype")||e.attr("encoding")||"multipart/form-data";k.setAttribute("target",q);(!f||/post/i.test(f))&&k.setAttribute("method","POST");g!=d.url&&k.setAttribute("action",d.url);!d.skipEncodingOverride&&(!f||/post/i.test(f))&&e.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});d.timeout&&(r=
setTimeout(function(){v=!0;l(x)},d.timeout));var p=[];try{if(d.extraData)for(var m in d.extraData)d.extraData.hasOwnProperty(m)&&(c.isPlainObject(d.extraData[m])&&d.extraData[m].hasOwnProperty("name")&&d.extraData[m].hasOwnProperty("value")?p.push(c('<input type="hidden" name="'+d.extraData[m].name+'">').val(d.extraData[m].value).appendTo(k)[0]):p.push(c('<input type="hidden" name="'+m+'">').val(d.extraData[m]).appendTo(k)[0]));d.iframeTarget||t.appendTo("body");s.attachEvent?s.attachEvent("onload",
l):s.addEventListener("load",l,!1);setTimeout(a,15);try{k.submit()}catch(C){document.createElement("form").submit.apply(k)}}finally{k.setAttribute("action",g),k.setAttribute("enctype",j),b?k.setAttribute("target",b):e.removeAttr("target"),c(p).remove()}}function l(a){if(!g.aborted&&!A)if(p=i(s),p||(n("cannot access response document"),a=D),a===x&&g)g.abort("timeout"),u.reject(g,"timeout");else if(a==D&&g)g.abort("server abort"),u.reject(g,"error","server abort");else if(p&&p.location.href!=d.iframeSrc||
v){s.detachEvent?s.detachEvent("onload",l):s.removeEventListener("load",l,!1);var a="success",b;try{if(v)throw"timeout";var e="xml"==d.dataType||p.XMLDocument||c.isXMLDoc(p);n("isXml="+e);if(!e&&(window.opera&&(null===p.body||!p.body.innerHTML))&&--E){n("requeing onLoad callback, DOM not available");setTimeout(l,250);return}var f=p.body?p.body:p.documentElement;g.responseText=f?f.innerHTML:null;g.responseXML=p.XMLDocument?p.XMLDocument:p;e&&(d.dataType="xml");g.getResponseHeader=function(a){return{"content-type":d.dataType}[a.toLowerCase()]};
f&&(g.status=Number(f.getAttribute("status"))||g.status,g.statusText=f.getAttribute("statusText")||g.statusText);var h=(d.dataType||"").toLowerCase(),j=/(json|script|text)/.test(h);if(j||d.textarea){var k=p.getElementsByTagName("textarea")[0];if(k)g.responseText=k.value,g.status=Number(k.getAttribute("status"))||g.status,g.statusText=k.getAttribute("statusText")||g.statusText;else if(j){var m=p.getElementsByTagName("pre")[0],C=p.getElementsByTagName("body")[0];m?g.responseText=m.textContent?m.textContent:
m.innerText:C&&(g.responseText=C.textContent?C.textContent:C.innerText)}}else"xml"==h&&(!g.responseXML&&g.responseText)&&(g.responseXML=F(g.responseText));try{var e=g,f=d,q=e.getResponseHeader("content-type")||"",H="xml"===h||!h&&0<=q.indexOf("xml"),w=H?e.responseXML:e.responseText;H&&"parsererror"===w.documentElement.nodeName&&c.error&&c.error("parsererror");f&&f.dataFilter&&(w=f.dataFilter(w,h));"string"===typeof w&&("json"===h||!h&&0<=q.indexOf("json")?w=G(w):("script"===h||!h&&0<=q.indexOf("javascript"))&&
c.globalEval(w));z=w}catch(I){a="parsererror",g.error=b=I||a}}catch(B){n("error caught: ",B),a="error",g.error=b=B||a}g.aborted&&(n("upload aborted"),a=null);g.status&&(a=200<=g.status&&300>g.status||304===g.status?"success":"error");"success"===a?(d.success&&d.success.call(d.context,z,"success",g),u.resolve(g.responseText,"success",g),y&&c.event.trigger("ajaxSuccess",[g,d])):a&&(void 0===b&&(b=g.statusText),d.error&&d.error.call(d.context,g,a,b),u.reject(g,"error",b),y&&c.event.trigger("ajaxError",
[g,d,b]));y&&c.event.trigger("ajaxComplete",[g,d]);y&&!--c.active&&c.event.trigger("ajaxStop");d.complete&&d.complete.call(d.context,g,a);A=!0;d.timeout&&clearTimeout(r);setTimeout(function(){d.iframeTarget?t.attr("src",d.iframeSrc):t.remove();g.responseXML=null},100)}}var k=e[0],j,d,y,q,t,s,g,v,r,u=c.Deferred();u.abort=function(a){g.abort(a)};if(b)for(j=0;j<m.length;j++)b=c(m[j]),B?b.prop("disabled",!1):b.removeAttr("disabled");d=c.extend(!0,{},c.ajaxSettings,a);d.context=d.context||d;q="jqFormIO"+
(new Date).getTime();d.iframeTarget?(t=c(d.iframeTarget),(j=t.attr2("name"))?q=j:t.attr2("name",q)):(t=c('<iframe name="'+q+'" src="'+d.iframeSrc+'" />'),t.css({position:"absolute",top:"-1000px",left:"-1000px"}));s=t[0];g={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var b="timeout"===a?"timeout":"aborted";n("aborting upload... "+b);this.aborted=1;try{s.contentWindow.document.execCommand&&
s.contentWindow.document.execCommand("Stop")}catch(e){}t.attr("src",d.iframeSrc);g.error=b;d.error&&d.error.call(d.context,g,b,a);y&&c.event.trigger("ajaxError",[g,d,b]);d.complete&&d.complete.call(d.context,g,b)}};(y=d.global)&&0===c.active++&&c.event.trigger("ajaxStart");y&&c.event.trigger("ajaxSend",[g,d]);if(d.beforeSend&&!1===d.beforeSend.call(d.context,g,d))return d.global&&c.active--,u.reject(),u;if(g.aborted)return u.reject(),u;if(b=k.clk)if((j=b.name)&&!b.disabled)d.extraData=d.extraData||
{},d.extraData[j]=b.value,"image"==b.type&&(d.extraData[j+".x"]=k.clk_x,d.extraData[j+".y"]=k.clk_y);var x=1,D=2,b=c("meta[name=csrf-token]").attr("content");if((j=c("meta[name=csrf-param]").attr("content"))&&b)d.extraData=d.extraData||{},d.extraData[j]=b;d.forceSync?h():setTimeout(h,10);var z,p,E=50,A,F=c.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&
"parsererror"!=b.documentElement.nodeName?b:null},G=c.parseJSON||function(a){return window.eval("("+a+")")};return u}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var f,b,e=this;"function"==typeof a?a={success:a}:void 0===a&&(a={});f=a.type||this.attr2("method");b=a.url||this.attr2("action");(b=(b="string"===typeof b?c.trim(b):"")||window.location.href||"")&&(b=(b.match(/^([^#]+)/)||[])[1]);a=c.extend(!0,{url:b,success:c.ajaxSettings.success,type:f||c.ajaxSettings.type,
iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);b={};this.trigger("form-pre-serialize",[this,a,b]);if(b.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var l=a.traditional;void 0===l&&(l=c.ajaxSettings.traditional);var m=[],h,j=this.formToArray(a.semantic,m);a.data&&(a.extraData=a.data,h=c.param(a.data,
l));if(a.beforeSubmit&&!1===a.beforeSubmit(j,this,a))return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[j,this,a,b]);if(b.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;b=c.param(j,l);h&&(b=b?b+"&"+h:h);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+b,a.data=null):a.data=b;var k=[];a.resetForm&&k.push(function(){e.resetForm()});a.clearForm&&k.push(function(){e.clearForm(a.includeHidden)});
if(!a.dataType&&a.target){var D=a.success||function(){};k.push(function(b){var e=a.replaceTarget?"replaceWith":"html";c(a.target)[e](b).each(D,arguments)})}else a.success&&k.push(a.success);a.success=function(b,c,f){for(var h=a.context||this,i=0,j=k.length;i<j;i++)k[i].apply(h,[b,c,f||e,e])};if(a.error){var v=a.error;a.error=function(b,c,f){v.apply(a.context||this,[b,c,f,e])}}if(a.complete){var r=a.complete;a.complete=function(b,c){r.apply(a.context||this,[b,c,e])}}h=0<c("input[type=file]:enabled",
this).filter(function(){return""!==c(this).val()}).length;b="multipart/form-data"==e.attr("enctype")||"multipart/form-data"==e.attr("encoding");l=z&&F;n("fileAPI :"+l);var x;if(!1!==a.iframe&&(a.iframe||(h||b)&&!l))a.closeKeepAlive?c.get(a.closeKeepAlive,function(){x=i(j)}):x=i(j);else if((h||b)&&l){var E=new FormData;for(b=0;b<j.length;b++)E.append(j[b].name,j[b].value);if(a.extraData){b=c.param(a.extraData,a.traditional).split("&");l=b.length;h=[];var q,A;for(q=0;q<l;q++)b[q]=b[q].replace(/\+/g,
" "),A=b[q].split("="),h.push([decodeURIComponent(A[0]),decodeURIComponent(A[1])]);for(b=0;b<h.length;b++)h[b]&&E.append(h[b][0],h[b][1])}a.data=null;h=c.extend(!0,{},c.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:f||"POST"});a.uploadProgress&&(h.xhr=function(){var b=c.ajaxSettings.xhr();b.upload&&b.upload.addEventListener("progress",function(b){var c=0,e=b.loaded||b.position,f=b.total;b.lengthComputable&&(c=Math.ceil(100*(e/f)));a.uploadProgress(b,e,f,c)},!1);return b});h.data=null;
var G=h.beforeSend;h.beforeSend=function(b,c){c.data=a.formData?a.formData:E;G&&G.call(this,b,c)};x=c.ajax(h)}else x=c.ajax(a);e.removeData("jqxhr").data("jqxhr",x);for(h=0;h<m.length;h++)m[h]=null;this.trigger("form-submit-notify",[this,a]);return this};c.fn.ajaxForm=function(a){a=a||{};a.delegation=a.delegation&&c.isFunction(c.fn.on);if(!a.delegation&&0===this.length){var i=this.selector,f=this.context;if(!c.isReady&&i)return n("DOM not ready, queuing ajaxForm"),c(function(){c(i,f).ajaxForm(a)}),
this;n("terminating; zero elements found by selector"+(c.isReady?"":" (DOM not ready)"));return this}return a.delegation?(c(document).off("submit.form-plugin",this.selector,v).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,a,v).on("click.form-plugin",this.selector,a,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",a,v).bind("click.form-plugin",a,r)};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};c.fn.formToArray=function(a,
i){var f=[];if(0===this.length)return f;var b=this[0],e=this.attr("id"),l=a?b.getElementsByTagName("*"):b.elements;l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=c(l).get());e&&(e=c(':input[form="'+e+'"]').get(),e.length&&(l=(l||[]).concat(e)));if(!l||!l.length)return f;var m,h,j,k,n;m=0;for(n=l.length;m<n;m++)if(k=l[m],(e=k.name)&&!k.disabled)if(a&&b.clk&&"image"==k.type)b.clk==k&&(f.push({name:e,value:c(k).val(),type:k.type}),f.push({name:e+".x",value:b.clk_x},{name:e+".y",value:b.clk_y}));else if((j=
c.fieldValue(k,!0))&&j.constructor==Array){i&&i.push(k);h=0;for(k=j.length;h<k;h++)f.push({name:e,value:j[h]})}else if(z&&"file"==k.type)if(i&&i.push(k),j=k.files,j.length)for(h=0;h<j.length;h++)f.push({name:e,value:j[h],type:k.type});else f.push({name:e,value:"",type:k.type});else null!==j&&"undefined"!=typeof j&&(i&&i.push(k),f.push({name:e,value:j,type:k.type,required:k.required}));if(!a&&b.clk&&(l=c(b.clk),m=l[0],(e=m.name)&&!m.disabled&&"image"==m.type))f.push({name:e,value:l.val()}),f.push({name:e+
".x",value:b.clk_x},{name:e+".y",value:b.clk_y});return f};c.fn.formSerialize=function(a){return c.param(this.formToArray(a))};c.fn.fieldSerialize=function(a){var i=[];this.each(function(){var f=this.name;if(f){var b=c.fieldValue(this,a);if(b&&b.constructor==Array)for(var e=0,l=b.length;e<l;e++)i.push({name:f,value:b[e]});else null!==b&&"undefined"!=typeof b&&i.push({name:this.name,value:b})}});return c.param(i)};c.fn.fieldValue=function(a){for(var i=[],f=0,b=this.length;f<b;f++){var e=c.fieldValue(this[f],
a);null===e||("undefined"==typeof e||e.constructor==Array&&!e.length)||(e.constructor==Array?c.merge(i,e):i.push(e))}return i};c.fieldValue=function(a,i){var f=a.name,b=a.type,e=a.tagName.toLowerCase();void 0===i&&(i=!0);if(i&&(!f||a.disabled||"reset"==b||"button"==b||("checkbox"==b||"radio"==b)&&!a.checked||("submit"==b||"image"==b)&&a.form&&a.form.clk!=a||"select"==e&&-1==a.selectedIndex))return null;if("select"==e){var l=a.selectedIndex;if(0>l)return null;for(var f=[],e=a.options,m=(b="select-one"==
b)?l+1:e.length,l=b?l:0;l<m;l++){var h=e[l];if(h.selected){var j=h.value;j||(j=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(b)return j;f.push(j)}}return f}return c(a).val()};c.fn.clearForm=function(a){return this.each(function(){c("input,select,textarea",this).clearFields(a)})};c.fn.clearFields=c.fn.clearInputs=function(a){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var f=this.type,
b=this.tagName.toLowerCase();if(i.test(f)||"textarea"==b)this.value="";else if("checkbox"==f||"radio"==f)this.checked=!1;else if("select"==b)this.selectedIndex=-1;else if("file"==f)/MSIE/.test(navigator.userAgent)?c(this).replaceWith(c(this).clone(!0)):c(this).val("");else if(a&&(!0===a&&/hidden/.test(f)||"string"==typeof a&&c(this).is(a)))this.value=""})};c.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};
c.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};c.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var i=this.type;"checkbox"==i||"radio"==i?this.checked=a:"option"==this.tagName.toLowerCase()&&(i=c(this).parent("select"),a&&(i[0]&&"select-one"==i[0].type)&&i.find("option").selected(!1),this.selected=a)})};c.fn.ajaxSubmit.debug=!1});
